{% extends 'base.html' %}

{% block content %}
	<h2>Welcome, {{user.username}}</h2>
	<hr>
	<div id="chat-body" class="panel panel-default">
		<div class="panel-heading"><h3>Chat Box</h3></div>
			<div id="msg-list-div" class="panel-body">
				<ul id="msg-list" class="list-group">
					{% for obj in chat %}
						{% if obj.user == request.user %}
							<li class='text-right list-group-item'><small style="color:grey">~{{ obj.user }} </small><br><span style="font-size:25px">{{ obj.message }}</span><br><small style="color:grey">{{ obj.created }}</small></li>
						{% else %}
							<li class='text-left list-group-item'><small style="color:grey">~{{ obj.user }} </small><br><span style="font-size:25px">{{ obj.message }}</span><br><small style="color:grey">{{ obj.created }} </small></li>
						{% endif %}
					{% empty %}
						<li class='text-right list-group-item'>No messages yet!</li>
					{% endfor %}
					<script>
						var chatlist = document.getElementById('msg-list-div');
						chatlist.scrollTop = chatlist.scrollHeight;
					</script>
				</ul>
			</div>
	</div>
	<form id="chat-form" method="post" action="/post/"> 
		{% csrf_token %}
		<div id="chat-bottom" style="bottom:0 ; position: fixed;" class="input-group">
			<input type="text" id="chat-msg" name="chat-msg" class="form-control"/>
			<span class="input-group-btn">
				<input class="btn btn-default" id="send" type="submit" value="Send"/>
			</span>
		</div>
	</form>
	<div id="down"></div>
<script>
$(document).ready(function () {
    // Handler for .ready() called.
    $('html, body').animate({
        scrollTop: $('#down').offset().top
    }, 'slow');
});

</script>
{% endblock %}
